<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testimonials | Traveling Tastebuds</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chewy&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/styles.css">
    <meta name="description" content="Read what South Jersey and Philadelphia restaurant owners say about working with Traveling Tastebuds. Real results, real partnerships, real growth.">
    <link rel="canonical" href="https://travelingtastebuds.org/testimonials">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Testimonials | Traveling Tastebuds">
    <meta property="og:description" content="Read what South Jersey and Philadelphia restaurant owners say about working with Traveling Tastebuds. Real results, real partnerships, real growth.">
    <meta property="og:image" content="https://travelingtastebuds.org/Images/ttbLogo.png">
    <meta property="og:url" content="https://travelingtastebuds.org/testimonials">
    <meta property="og:site_name" content="Traveling Tastebuds">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Testimonials | Traveling Tastebuds">
    <meta name="twitter:description" content="What South Jersey and Philly restaurant owners say about working with Traveling Tastebuds.">
    <meta name="twitter:image" content="https://travelingtastebuds.org/Images/ttbLogo.png">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Traveling Tastebuds",
        "url": "https://travelingtastebuds.org",
        "image": "https://travelingtastebuds.org/Images/ttbLogo.png",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "5.0",
            "bestRating": "5",
            "worstRating": "1",
            "ratingCount": "6",
            "reviewCount": "6"
        },
        "review": [
            {
                "@type": "Review",
                "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
                "author": { "@type": "Person", "name": "Restaurant Owner, South Jersey" },
                "reviewBody": "PJ came in and filmed a video for us and we were completely sold out the next weekend. People were coming in saying they saw us on TikTok."
            },
            {
                "@type": "Review",
                "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
                "author": { "@type": "Person", "name": "Restaurant Owner, Philadelphia" },
                "reviewBody": "We've tried other food influencers before but nobody delivered like Traveling Tastebuds. The video quality was top-notch and our social media following doubled within a month."
            },
            {
                "@type": "Review",
                "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
                "author": { "@type": "Person", "name": "Restaurant Owner, Camden County" },
                "reviewBody": "PJ is the real deal. The video he made for us got over 500K views and brought in customers from all over the area. Best investment we've made in marketing."
            },
            {
                "@type": "Review",
                "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
                "author": { "@type": "Person", "name": "Restaurant Owner, Gloucester County" },
                "reviewBody": "After PJ's video dropped, we had a line out the door for three straight days. He doesn't just make content — he drives real foot traffic to your business."
            },
            {
                "@type": "Review",
                "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
                "author": { "@type": "Person", "name": "Restaurant Owner, South Jersey" },
                "reviewBody": "What sets PJ apart is that he actually sits down, eats the food, and gives an honest review. Since his feature, we've become a destination spot for people exploring local food."
            },
            {
                "@type": "Review",
                "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
                "author": { "@type": "Person", "name": "Restaurant Owner, Philadelphia" },
                "reviewBody": "PJ featured our spot and within 48 hours we had more online orders than we'd ever seen. He knows how to tell a story that makes people want to come try your food."
            }
        ]
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://travelingtastebuds.org/" },
            { "@type": "ListItem", "position": 2, "name": "Testimonials", "item": "https://travelingtastebuds.org/testimonials" }
        ]
    }
    </script>
</head>

<body>
    <!-- Navbar -->
    <script src="/navbar-loader.js"></script>

    <!-- Hero -->
    <section class="services-hero">
        <div class="hero-content">
            <h1 class="section-title" style="font-size: 2.5rem;">What They're Saying</h1>
            <p class="section-subtitle">Real results from real restaurant partnerships. Here's what owners have to say about working with TTB.</p>
            <hr class="section-divider">
        </div>
    </section>

    <!-- Trust Stats Bar -->
    <section class="container">
        <div class="testimonial-stats-bar" id="trustStatsBar">
            <!-- Default fallback — replaced by JS when API loads -->
            <div class="testimonial-stat">
                <i class="fas fa-utensils"></i>
                <div class="testimonial-stat-content">
                    <span class="testimonial-stat-number">50+</span>
                    <span class="testimonial-stat-label">Restaurants Featured</span>
                </div>
            </div>
            <div class="testimonial-stat">
                <i class="fas fa-star"></i>
                <div class="testimonial-stat-content">
                    <span class="testimonial-stat-number">5.0</span>
                    <span class="testimonial-stat-label">Average Rating</span>
                </div>
            </div>
            <div class="testimonial-stat">
                <i class="fas fa-eye"></i>
                <div class="testimonial-stat-content">
                    <span class="testimonial-stat-number">10M+</span>
                    <span class="testimonial-stat-label">Total Views</span>
                </div>
            </div>
            <div class="testimonial-stat">
                <i class="fas fa-handshake"></i>
                <div class="testimonial-stat-content">
                    <span class="testimonial-stat-number">100%</span>
                    <span class="testimonial-stat-label">Satisfaction</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="container">
        <div class="row justify-content-center" id="testimonialsContainer">
            <!-- Loading skeleton -->
            <div class="col-lg-6 col-md-6 mb-4 d-flex" id="testimonialSkeleton">
                <div class="testimonial-card d-flex flex-column" style="align-items:center;justify-content:center;min-height:200px;opacity:0.6;">
                    <i class="fas fa-spinner fa-spin" style="font-size:1.5rem;color:var(--text-muted);margin-bottom:1rem;"></i>
                    <p style="color:var(--text-muted);margin:0;font-size:0.9rem;">Loading testimonials...</p>
                </div>
            </div>
        </div>

        <!-- CTA -->
        <div class="text-center" style="padding: 2rem 0;">
            <h3 style="color: var(--text-white); margin-bottom: 1rem;">Ready to see results like these?</h3>
            <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Let TTB put your restaurant in front of thousands of hungry foodies.</p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <a href="/services" class="btn-ttb btn-ttb-primary"><i class="fas fa-briefcase"></i> View Packages</a>
                <a href="/contact" class="btn-ttb btn-ttb-outline"><i class="fas fa-envelope"></i> Get In Touch</a>
            </div>
        </div>

        <!-- Submit Testimonial CTA -->
        <div class="testimonial-submit-cta">
            <div class="glass-card text-center" style="max-width: 600px; margin: 0 auto;">
                <h4 style="color: var(--text-white); margin-bottom: 0.75rem;">
                    <i class="fas fa-comment-dots" style="color: var(--accent);"></i> Worked with TTB?
                </h4>
                <p style="color: var(--text-muted); font-size: 0.95rem; margin-bottom: 1rem;">
                    If we've featured your restaurant, we'd love to hear about your experience. Share your story!
                </p>
                <a href="/contact?subject=Testimonial" class="btn-ttb btn-ttb-accent">
                    <i class="fas fa-pen"></i> Submit Your Testimonial
                </a>
            </div>
        </div>
    </section>

    <!-- TikTok Video Overlay -->
    <div class="tiktok-overlay" id="tiktokOverlay">
        <div class="tiktok-overlay-backdrop" id="tiktokOverlayBackdrop"></div>
        <div class="tiktok-overlay-content">
            <div class="tiktok-overlay-header">
                <span class="tiktok-overlay-title" id="tiktokOverlayTitle">TikTok Review</span>
                <button class="tiktok-overlay-close" id="tiktokOverlayClose" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="tiktok-overlay-frame">
                <div class="tiktok-overlay-loader" id="tiktokOverlayLoader">
                    <div class="tiktok-overlay-spinner"></div>
                    <span>Loading review...</span>
                </div>
                <iframe id="tiktokOverlayIframe" allowfullscreen allow="encrypted-media"></iframe>
            </div>
            <div class="tiktok-overlay-nav">
                <button id="tiktokOverlayPrev" aria-label="Previous review">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <span class="tiktok-overlay-counter" id="tiktokOverlayCounter">1 / 1</span>
                <button id="tiktokOverlayNext" aria-label="Next review">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-container"></div>

    <script src="/js/ttb-data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script>
        fetch('/footer.html')
            .then(r => r.text())
            .then(html => { document.getElementById('footer-container').innerHTML = html; })
            .catch(() => {});

        // ── Globals ─────────────────────────────────
        var allPageTestimonials = [];

        function extractVideoId(url) {
            if (!url) return '';
            var match = url.match(/\/video\/(\d+)/);
            return match ? match[1] : '';
        }

        function getVideoId(t) {
            if (t.spot && t.spot.tiktokId) return TTBData.sanitizeTikTokId(t.spot.tiktokId);
            return TTBData.sanitizeTikTokId(extractVideoId(t.tiktokUrl));
        }

        // ── Dynamic Trust Stats ──────────────────────
        TTBData.getTrustStats().then(function (stats) {
            if (!stats || stats.length === 0) return;
            var bar = document.getElementById('trustStatsBar');
            if (!bar) return;
            bar.innerHTML = stats.map(function (s) {
                return '<div class="testimonial-stat">' +
                    '<i class="' + TTBData.escapeHtml(s.icon || 'fas fa-star') + '"></i>' +
                    '<div class="testimonial-stat-content">' +
                    '<span class="testimonial-stat-number">' + TTBData.escapeHtml(s.number || '') + '</span>' +
                    '<span class="testimonial-stat-label">' + TTBData.escapeHtml(s.label || '') + '</span>' +
                    '</div></div>';
            }).join('');
        });

        // ── Dynamic Testimonials ─────────────────────
        Promise.all([TTBData.getTestimonials(), TTBData.getSpots()]).then(function (results) {
            var testimonials = results[0];
            var spots = results[1] || [];
            var container = document.getElementById('testimonialsContainer');
            if (!container) return;

            var skeleton = document.getElementById('testimonialSkeleton');
            if (skeleton) skeleton.remove();

            if (!testimonials || testimonials.length === 0) {
                container.innerHTML =
                    '<div class="col-12 text-center" style="padding:3rem 0;">' +
                    '<p style="color:var(--text-muted);font-size:1.1rem;">Testimonials coming soon!</p>' +
                    '</div>';
                return;
            }

            // Client-side enrichment: match by name if server didn't attach spot
            var spotsByName = {};
            spots.forEach(function (s) {
                if (s.name) spotsByName[s.name.toLowerCase().trim()] = s;
            });
            testimonials.forEach(function (t) {
                if (!t.spot && t.restaurantName) {
                    var match = spotsByName[t.restaurantName.toLowerCase().trim()];
                    if (match) t.spot = match;
                }
            });

            allPageTestimonials = testimonials;
            var esc = TTBData.escapeHtml;

            container.innerHTML = testimonials.map(function (t, index) {
                var hasSpot = t.spot && t.spot.name;
                var restaurantName = hasSpot ? t.spot.name : (t.restaurantName || '');
                var location = t.location || (hasSpot ? t.spot.location : '') || '';
                var videoId = getVideoId(t);

                // Stars
                var stars = '';
                for (var i = 0; i < 5; i++) {
                    stars += '<i class="fas fa-star' + (i < (t.rating || 5) ? '' : ' style="opacity:0.25"') + '"></i>';
                }

                // Card header — logo + restaurant info
                var headerHtml = '';
                if (hasSpot && t.spot.logoImage) {
                    headerHtml = '<div class="testimonial-card-header">' +
                        '<div class="testimonial-card-logo-wrap"' +
                        (t.spot.logoBgColor ? ' style="background:' + esc(t.spot.logoBgColor) + ';"' : '') + '>' +
                        '<img src="' + esc(t.spot.logoImage) + '" alt="' + esc(restaurantName) + '" class="testimonial-card-logo">' +
                        '</div>' +
                        '<div class="testimonial-card-info">' +
                        '<h4 class="testimonial-card-name">' + esc(restaurantName) + '</h4>' +
                        '<span class="testimonial-card-location"><i class="fas fa-map-marker-alt"></i> ' + esc(location) + '</span>' +
                        '<div class="testimonial-stars">' + stars + '</div>' +
                        '</div></div>';
                } else if (restaurantName) {
                    headerHtml = '<div class="testimonial-card-header testimonial-card-header-text">' +
                        '<div class="testimonial-card-icon-placeholder"><i class="fas fa-store"></i></div>' +
                        '<div class="testimonial-card-info">' +
                        '<h4 class="testimonial-card-name">' + esc(restaurantName) + '</h4>' +
                        '<span class="testimonial-card-location"><i class="fas fa-map-marker-alt"></i> ' + esc(location) + '</span>' +
                        '<div class="testimonial-stars">' + stars + '</div>' +
                        '</div></div>';
                } else {
                    headerHtml = '<div class="testimonial-card-header testimonial-card-header-text">' +
                        '<div class="testimonial-card-info">' +
                        (location ? '<span class="testimonial-card-location"><i class="fas fa-map-marker-alt"></i> ' + esc(location) + '</span>' : '') +
                        '<div class="testimonial-stars">' + stars + '</div>' +
                        '</div></div>';
                }

                // Result badge
                var resultHtml = '';
                if (t.result) {
                    resultHtml = '<div class="testimonial-result"><i class="' +
                        esc(t.resultIcon || 'fas fa-chart-line') + '"></i> ' +
                        esc(t.result) + '</div>';
                }

                // Watch video button (opens overlay)
                var videoHtml = '';
                if (videoId) {
                    videoHtml = '<button class="testimonial-watch-btn" onclick="openTestimonialVideo(' + index + ')">' +
                        '<i class="fab fa-tiktok"></i> Watch the Review</button>';
                }

                return '<div class="col-lg-6 col-md-6 mb-4 d-flex">' +
                    '<div class="testimonial-card d-flex flex-column">' +
                    '<div class="testimonial-verified-badge"><i class="fas fa-check-circle"></i> Verified TTB Partner</div>' +
                    headerHtml +
                    '<div class="testimonial-card-body">' +
                    '<div class="testimonial-quote-icon"><i class="fas fa-quote-left"></i></div>' +
                    '<p class="testimonial-quote">"' + esc(t.quote || '') + '"</p>' +
                    resultHtml +
                    videoHtml +
                    '</div>' +
                    '<div class="testimonial-card-footer mt-auto">' +
                    '<span class="testimonial-author">' + esc(t.authorName || 'Restaurant Owner') + '</span>' +
                    (t.date ? '<span class="testimonial-date">' + esc(t.date) + '</span>' : '') +
                    '</div>' +
                    '</div></div>';
            }).join('');
        });

        // ── TikTok Overlay ──────────────────────────
        function openTestimonialVideo(index) {
            var t = allPageTestimonials[index];
            if (!t) return;

            var videoId = getVideoId(t);
            if (!videoId) return;

            var overlay = document.getElementById('tiktokOverlay');
            var iframe = document.getElementById('tiktokOverlayIframe');
            var loader = document.getElementById('tiktokOverlayLoader');
            var title = document.getElementById('tiktokOverlayTitle');
            var counter = document.getElementById('tiktokOverlayCounter');

            title.textContent = t.spot ? t.spot.name : (t.restaurantName || 'TikTok Review');

            // Build list of testimonials that have videos for navigation
            var videoIndices = [];
            allPageTestimonials.forEach(function (item, i) {
                if (getVideoId(item)) videoIndices.push(i);
            });
            var currentPos = videoIndices.indexOf(index) + 1;
            counter.textContent = currentPos + ' / ' + videoIndices.length;

            overlay.setAttribute('data-index', index);

            loader.classList.remove('hidden');
            iframe.src = 'https://www.tiktok.com/embed/' + videoId;
            iframe.addEventListener('load', function () {
                loader.classList.add('hidden');
            }, { once: true });

            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeTestimonialOverlay() {
            var overlay = document.getElementById('tiktokOverlay');
            var iframe = document.getElementById('tiktokOverlayIframe');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            iframe.removeAttribute('src');
        }

        function navigateTestimonialOverlay(direction) {
            var overlay = document.getElementById('tiktokOverlay');
            var currentIdx = parseInt(overlay.getAttribute('data-index'), 10);

            var videoIndices = [];
            allPageTestimonials.forEach(function (item, i) {
                if (getVideoId(item)) videoIndices.push(i);
            });

            var pos = videoIndices.indexOf(currentIdx);
            var newPos = pos + direction;
            if (newPos < 0) newPos = videoIndices.length - 1;
            if (newPos >= videoIndices.length) newPos = 0;

            openTestimonialVideo(videoIndices[newPos]);
        }

        // Overlay event listeners
        document.getElementById('tiktokOverlayClose').addEventListener('click', closeTestimonialOverlay);
        document.getElementById('tiktokOverlayBackdrop').addEventListener('click', closeTestimonialOverlay);
        document.getElementById('tiktokOverlayPrev').addEventListener('click', function () { navigateTestimonialOverlay(-1); });
        document.getElementById('tiktokOverlayNext').addEventListener('click', function () { navigateTestimonialOverlay(1); });
        document.addEventListener('keydown', function (e) {
            var overlay = document.getElementById('tiktokOverlay');
            if (!overlay.classList.contains('active')) return;
            if (e.key === 'Escape') closeTestimonialOverlay();
            if (e.key === 'ArrowLeft') navigateTestimonialOverlay(-1);
            if (e.key === 'ArrowRight') navigateTestimonialOverlay(1);
        });
    </script>
</body>

</html>
